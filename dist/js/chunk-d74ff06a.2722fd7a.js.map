{"version":3,"sources":["webpack:///./src/views/provider/index.vue?de7e","webpack:///./src/views/provider/index.vue?99ac","webpack:///src/views/provider/index.vue","webpack:///./src/views/provider/index.vue?a505","webpack:///./src/views/provider/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","student","index","key","on","$event","handleChooseProvider","id","attrs","teacher","_e","staticRenderFns","name","components","data","students","oauth_key","watch","immediate","handler","getLineLogin","computed","$route","query","methods","component"],"mappings":"kHAAA,yBAA2jB,EAAG,G,2CCA9jB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACN,EAAIO,GAAG,qBAAqBH,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIO,GAAG,aAAaP,EAAIQ,GAAIR,EAAY,UAAE,SAASS,EAAQC,GAAO,OAAON,EAAG,MAAM,CAACO,IAAID,EAAMJ,YAAY,OAAOM,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIc,qBAAqB,UAAWL,EAAQM,OAAO,CAACX,EAAG,eAAe,CAACY,MAAM,CAAC,QAAUP,MAAY,OAAM,GAAGL,EAAG,MAAM,CAACA,EAAG,OAAO,CAACJ,EAAIO,GAAG,aAAcP,EAAIiB,QAAU,GAAEb,EAAG,MAAM,CAACE,YAAY,OAAOM,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOb,EAAIc,qBAAqB,UAAWd,EAAIiB,QAAQF,OAAO,CAACX,EAAG,eAAe,CAACY,MAAM,CAAC,QAAS,EAAM,QAAUhB,EAAIiB,YAAY,GAAGjB,EAAIkB,YACjwBC,EAAkB,G,2FCyBtB,GACEC,KAAM,WACNC,WAAY,CAAd,uCACEC,KAHF,WAII,MAAO,CACLC,SAAU,GACVN,QAAS,CACPF,GAAI,MAENS,UAAW,KAGfC,MAAO,CACLd,IAAK,CACHe,WAAW,EACXC,QAFN,WAGQ1B,KAAK2B,kBAIXC,SAAU,CACRlB,IADJ,WAEM,OAAOV,KAAK6B,OAAOC,MAAMpB,MAG7BqB,QAAS,CACP,qBADJ,SACA,gMAEA,wDAFA,gBAEA,EAFA,EAEA,eAFA,EAEA,WACA,wCACA,iCACA,aAEA,8BAPA,qDASA,+BACA,+DAVA,6DAcI,aAfJ,WAeA,yLAEA,4BAFA,gBAEA,EAFA,EAEA,KACA,6BACA,4BACA,4CACA,wCAGA,wBATA,qDAWA,+BACA,oEAZA,+DClE8V,I,wBCQ1VC,EAAY,eACd,EACAlC,EACAoB,GACA,EACA,KACA,WACA,MAIa,aAAAc,E","file":"js/chunk-d74ff06a.2722fd7a.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=273d7b45&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=273d7b45&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"provider__title\"},[_vm._v(\"Choose Provider\")]),_c('div',{staticClass:\"provider__box\"},[_c('div',[_c('span',[_vm._v(\"Student\")]),_vm._l((_vm.students),function(student,index){return _c('div',{key:index,staticClass:\"into\",on:{\"click\":function($event){return _vm.handleChooseProvider('student', student.id)}}},[_c('student-card',{attrs:{\"student\":student}})],1)})],2),_c('div',[_c('span',[_vm._v(\"Teacher\")]),(_vm.teacher.id)?_c('div',{staticClass:\"into\",on:{\"click\":function($event){return _vm.handleChooseProvider('teacher', _vm.teacher.id)}}},[_c('teacher-card',{attrs:{\"viewer\":false,\"teacher\":_vm.teacher}})],1):_vm._e()])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"provider__title\">Choose Provider</div>\r\n    <div class=\"provider__box\">\r\n      <div>\r\n        <span>Student</span>\r\n        <div class=\"into\" @click=\"handleChooseProvider('student', student.id)\" v-for=\"(student, index) in students\" :key=\"index\">\r\n          <student-card :student=\"student\" />\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <span>Teacher</span>\r\n        <div class=\"into\" @click=\"handleChooseProvider('teacher', teacher.id)\" v-if=\"teacher.id\">\r\n          <teacher-card :viewer=\"false\" :teacher=\"teacher\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { StudentCard, TeacherCard } from \"@/components\";\r\nimport _ from \"lodash\";\r\nimport {accounts, lineAuth} from \"../../api/auth\";\r\nimport store from \"@/store\";\r\n\r\nexport default {\r\n  name: \"Provider\",\r\n  components: { StudentCard, TeacherCard },\r\n  data() {\r\n    return {\r\n      students: [],\r\n      teacher: {\r\n        id: null\r\n      },\r\n      oauth_key: ''\r\n    };\r\n  },\r\n  watch: {\r\n    key: {\r\n      immediate: true,\r\n      handler() {\r\n        this.getLineLogin()\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    key() {\r\n      return this.$route.query.key\r\n    },\r\n  },\r\n  methods: {\r\n    async handleChooseProvider(provider, id) {\r\n      try {\r\n        const { access_token, token_type } = await lineAuth({id: id, provider: provider, oauth_key: this.oauth_key})\r\n        store.commit('SET_TOKEN_AND_PROVIDER', {\r\n          token: `${token_type} ${access_token}`,\r\n          provider\r\n        })\r\n        this.$router.push({ name: 'home' })\r\n      } catch (e) {\r\n        this.$router.push({ name: 'login' })\r\n        this.$Message.error(_.get(e, 'response.data.message', '登陆失败'))\r\n      }\r\n\r\n    },\r\n    async getLineLogin() {\r\n        try {\r\n          const { data }  = await accounts({key: this.key})\r\n          this.students = data.account.student\r\n          this.teacher = data.account.teacher\r\n          if(this.students.length === 0 && this.teacher.id === null) {\r\n            this.$Message.error('该 line 还未未绑定账号 请先绑定')\r\n          }\r\n\r\n            this.oauth_key = data.oauth_key\r\n        } catch (e) {\r\n          this.$router.push({name: 'login'})\r\n          this.$Message.error(_.get(e, 'response.data.message', 'line 登陆失败'))\r\n        }\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n@import '@/assets/style/color.less';\r\n\r\n.container {\r\n  padding-top: 70px;\r\n  user-select: none;\r\n  .provider__title {\r\n    font-size: 28px;\r\n    font-weight: bold;\r\n  }\r\n  .provider__box {\r\n    padding: 32px 0 12px 0;\r\n    display: -webkit-flex;\r\n    > div {\r\n      width: 50%;\r\n      box-sizing: border-box;\r\n      padding-right: 24px;\r\n      > span {\r\n        font-size: 16px;\r\n      }\r\n      .into {\r\n        transition: all 0.3s;\r\n        will-change: transform;\r\n        cursor: pointer;\r\n        position: relative;\r\n        &:hover {\r\n          &::after {\r\n            transform: translate(0, 0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        &::after {\r\n          content: \"Choose\";\r\n          position: absolute;\r\n          width: 100%;\r\n          height: 100%;\r\n          display: -webkit-flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          color: white;\r\n          background: @themeColor;\r\n          border-radius: 3px;\r\n          top: 0;\r\n          right: 0;\r\n          opacity: 0;\r\n          transition: all .55s;\r\n          transform: translate(10px, 0);\r\n          font-weight: bold;\r\n          font-size: 16px;\r\n        }\r\n      }\r\n      .student__card,\r\n      .teacher__card {\r\n        margin-top: 24px;\r\n      }\r\n      .teacher__card {\r\n        width: 100%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=273d7b45&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=273d7b45&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"273d7b45\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}