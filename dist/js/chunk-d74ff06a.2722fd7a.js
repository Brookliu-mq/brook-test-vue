(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d74ff06a"],{"3c45":function(e,t,n){"use strict";var r=n("d4f9"),a=n.n(r);a.a},"97f8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"provider__title"},[e._v("Choose Provider")]),n("div",{staticClass:"provider__box"},[n("div",[n("span",[e._v("Student")]),e._l(e.students,(function(t,r){return n("div",{key:r,staticClass:"into",on:{click:function(n){return e.handleChooseProvider("student",t.id)}}},[n("student-card",{attrs:{student:t}})],1)}))],2),n("div",[n("span",[e._v("Teacher")]),e.teacher.id?n("div",{staticClass:"into",on:{click:function(t){return e.handleChooseProvider("teacher",e.teacher.id)}}},[n("teacher-card",{attrs:{viewer:!1,teacher:e.teacher}})],1):e._e()])])])},a=[],s=(n("99af"),n("96cf"),n("1da1")),c=n("2af9"),o=n("2ef0"),i=n.n(o),u=n("3786"),d=n("4360"),h={name:"Provider",components:{StudentCard:c["d"],TeacherCard:c["f"]},data:function(){return{students:[],teacher:{id:null},oauth_key:""}},watch:{key:{immediate:!0,handler:function(){this.getLineLogin()}}},computed:{key:function(){return this.$route.query.key}},methods:{handleChooseProvider:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u["b"])({id:t,provider:e,oauth_key:n.oauth_key});case 3:a=r.sent,s=a.access_token,c=a.token_type,d["a"].commit("SET_TOKEN_AND_PROVIDER",{token:"".concat(c," ").concat(s),provider:e}),n.$router.push({name:"home"}),r.next=14;break;case 10:r.prev=10,r.t0=r["catch"](0),n.$router.push({name:"login"}),n.$Message.error(i.a.get(r.t0,"response.data.message","登陆失败"));case 14:case"end":return r.stop()}}),r,null,[[0,10]])})))()},getLineLogin:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["a"])({key:e.key});case 3:n=t.sent,r=n.data,e.students=r.account.student,e.teacher=r.account.teacher,0===e.students.length&&null===e.teacher.id&&e.$Message.error("该 line 还未未绑定账号 请先绑定"),e.oauth_key=r.oauth_key,t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$router.push({name:"login"}),e.$Message.error(i.a.get(t.t0,"response.data.message","line 登陆失败"));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()}}},l=h,v=(n("3c45"),n("2877")),p=Object(v["a"])(l,r,a,!1,null,"273d7b45",null);t["default"]=p.exports},d4f9:function(e,t,n){}}]);
//# sourceMappingURL=chunk-d74ff06a.2722fd7a.js.map