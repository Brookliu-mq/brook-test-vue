(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2926e066"],{"057f":function(e,t,r){var n=r("fc6a"),a=r("241c").f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(e){try{return a(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?c(e):a(n(e))}},"159b":function(e,t,r){var n=r("da84"),a=r("fdbc"),i=r("17c2"),s=r("9112");for(var c in a){var o=n[c],f=o&&o.prototype;if(f&&f.forEach!==i)try{s(f,"forEach",i)}catch(u){f.forEach=i}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,a=r("a640"),i=r("ae40"),s=a("forEach"),c=i("forEach");e.exports=s&&c?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},2834:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"session"},[e.loading?r("Spin",{attrs:{fix:""}}):e._e(),r("div",{ref:"viewer",staticClass:"message__viewer"},e._l(e.messages,(function(t,n){return r("Message",{key:n,staticClass:"message__item",attrs:{own:t.send_type===e.CHAT_SEND_TYPE_TEACHER,message:t}})})),1),r("div",{staticClass:"message__controller"},[r("div",{staticClass:"message__textarea"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{placeholder:"请输入聊天内容"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),r("div",{staticClass:"message__send flex--ac flex--jc",on:{click:this.handleSendMessage}},[e.sending?r("Spin",{staticClass:"spin"}):e._e(),e._v(" 发送 ")],1)])],1)},a=[],i=(r("a9e3"),r("96cf"),r("1da1")),s=r("5530"),c=r("2af9"),o=r("d800"),f=r("b768"),u=r("2ef0"),l=r.n(u),d=r("2f62"),g={name:"dialog",components:{Message:c["a"]},props:{target:{type:[Number,String],required:!0}},data:function(){return{CHAT_SEND_TYPE_STUDENT:f["c"],CHAT_SEND_TYPE_TEACHER:f["d"],loading:!1,sending:!1,message:""}},computed:Object(s["a"])(Object(s["a"])({},Object(d["d"])(["recent_chat_users","recent_chat_messages"])),{},{messages:function(){return this.recent_chat_messages[this.target]||[]}}),watch:{target:{immediate:!0,deep:!0,handler:function(e){this.SET_CURRENT_CHAT_WITH(e),this.message="",this.fetchRecentMessages()}},messages:{deep:!0,immediate:!0,handler:function(){this.$nextTick(this.scrollToBottom)}}},beforeRouteLeave:function(e,t,r){this.SET_CURRENT_CHAT_WITH(null),r()},methods:Object(s["a"])(Object(s["a"])({},Object(d["c"])(["SET_RECENT_CHAT_MESSAGES","SET_CURRENT_CHAT_WITH"])),{},{scrollToBottom:function(){this.$refs.viewer.scrollTop=this.$refs.viewer.scrollHeight},fetchRecentMessages:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,t.next=4,Object(o["a"])(e.target);case 4:r=t.sent,n=r.data,a=l.a.cloneDeep(e.recent_chat_messages),a[e.target]=n,e.SET_RECENT_CHAT_MESSAGES(a),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.error(t.t0),e.$Message.error("请求消息记录失败");case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,11,15,18]])})))()},handleSendMessage:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!0!==e.sending){t.next=2;break}return t.abrupt("return",e.$Message.warning("消息发送中"));case 2:if(t.prev=2,""!==e.message){t.next=5;break}return t.abrupt("return",e.$Message.warning("请填写消息内容"));case 5:return e.sending=!0,t.next=8,Object(o["d"])(e.target,e.message);case 8:r=t.sent,n=r.data,e.message="",a=l.a.cloneDeep(e.recent_chat_messages),a[e.target]=a[e.target]||[],a[e.target].push(n),e.SET_RECENT_CHAT_MESSAGES(a),t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](2),console.error(t.t0),e.$Message.error(l.a.get(t.t0,"response.data.message","发送失败"));case 21:return t.prev=21,e.sending=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[2,17,21,24]])})))()}})},b=g,p=(r("dc38"),r("2877")),h=Object(p["a"])(b,n,a,!1,null,"76d9d599",null);t["default"]=h.exports},4160:function(e,t,r){"use strict";var n=r("23e7"),a=r("17c2");n({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},"4de4":function(e,t,r){"use strict";var n=r("23e7"),a=r("b727").filter,i=r("1dde"),s=r("ae40"),c=i("filter"),o=s("filter");n({target:"Array",proto:!0,forced:!c||!o},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"5a70":function(e,t,r){},"746f":function(e,t,r){var n=r("428f"),a=r("5135"),i=r("e538"),s=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});a(t,e)||s(t,e,{value:i.f(e)})}},a4d3:function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),i=r("d066"),s=r("c430"),c=r("83ab"),o=r("4930"),f=r("fdbf"),u=r("d039"),l=r("5135"),d=r("e8b5"),g=r("861d"),b=r("825a"),p=r("7b0b"),h=r("fc6a"),m=r("c04e"),v=r("5c6c"),y=r("7c73"),S=r("df75"),O=r("241c"),_=r("057f"),w=r("7418"),E=r("06cf"),T=r("9bf2"),j=r("d1e7"),C=r("9112"),P=r("6eeb"),L=r("5692"),x=r("f772"),M=r("d012"),R=r("90e3"),N=r("b622"),k=r("e538"),A=r("746f"),H=r("d44e"),D=r("69f3"),G=r("b727").forEach,$=x("hidden"),V="Symbol",I="prototype",F=N("toPrimitive"),J=D.set,U=D.getterFor(V),W=Object[I],B=a.Symbol,Y=i("JSON","stringify"),q=E.f,Q=T.f,z=_.f,K=j.f,X=L("symbols"),Z=L("op-symbols"),ee=L("string-to-symbol-registry"),te=L("symbol-to-string-registry"),re=L("wks"),ne=a.QObject,ae=!ne||!ne[I]||!ne[I].findChild,ie=c&&u((function(){return 7!=y(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=q(W,t);n&&delete W[t],Q(e,t,r),n&&e!==W&&Q(W,t,n)}:Q,se=function(e,t){var r=X[e]=y(B[I]);return J(r,{type:V,tag:e,description:t}),c||(r.description=t),r},ce=f?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof B},oe=function(e,t,r){e===W&&oe(Z,t,r),b(e);var n=m(t,!0);return b(r),l(X,n)?(r.enumerable?(l(e,$)&&e[$][n]&&(e[$][n]=!1),r=y(r,{enumerable:v(0,!1)})):(l(e,$)||Q(e,$,v(1,{})),e[$][n]=!0),ie(e,n,r)):Q(e,n,r)},fe=function(e,t){b(e);var r=h(t),n=S(r).concat(be(r));return G(n,(function(t){c&&!le.call(r,t)||oe(e,t,r[t])})),e},ue=function(e,t){return void 0===t?y(e):fe(y(e),t)},le=function(e){var t=m(e,!0),r=K.call(this,t);return!(this===W&&l(X,t)&&!l(Z,t))&&(!(r||!l(this,t)||!l(X,t)||l(this,$)&&this[$][t])||r)},de=function(e,t){var r=h(e),n=m(t,!0);if(r!==W||!l(X,n)||l(Z,n)){var a=q(r,n);return!a||!l(X,n)||l(r,$)&&r[$][n]||(a.enumerable=!0),a}},ge=function(e){var t=z(h(e)),r=[];return G(t,(function(e){l(X,e)||l(M,e)||r.push(e)})),r},be=function(e){var t=e===W,r=z(t?Z:h(e)),n=[];return G(r,(function(e){!l(X,e)||t&&!l(W,e)||n.push(X[e])})),n};if(o||(B=function(){if(this instanceof B)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=R(e),r=function(e){this===W&&r.call(Z,e),l(this,$)&&l(this[$],t)&&(this[$][t]=!1),ie(this,t,v(1,e))};return c&&ae&&ie(W,t,{configurable:!0,set:r}),se(t,e)},P(B[I],"toString",(function(){return U(this).tag})),P(B,"withoutSetter",(function(e){return se(R(e),e)})),j.f=le,T.f=oe,E.f=de,O.f=_.f=ge,w.f=be,k.f=function(e){return se(N(e),e)},c&&(Q(B[I],"description",{configurable:!0,get:function(){return U(this).description}}),s||P(W,"propertyIsEnumerable",le,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!o,sham:!o},{Symbol:B}),G(S(re),(function(e){A(e)})),n({target:V,stat:!0,forced:!o},{for:function(e){var t=String(e);if(l(ee,t))return ee[t];var r=B(t);return ee[t]=r,te[r]=t,r},keyFor:function(e){if(!ce(e))throw TypeError(e+" is not a symbol");if(l(te,e))return te[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),n({target:"Object",stat:!0,forced:!o,sham:!c},{create:ue,defineProperty:oe,defineProperties:fe,getOwnPropertyDescriptor:de}),n({target:"Object",stat:!0,forced:!o},{getOwnPropertyNames:ge,getOwnPropertySymbols:be}),n({target:"Object",stat:!0,forced:u((function(){w.f(1)}))},{getOwnPropertySymbols:function(e){return w.f(p(e))}}),Y){var pe=!o||u((function(){var e=B();return"[null]"!=Y([e])||"{}"!=Y({a:e})||"{}"!=Y(Object(e))}));n({target:"JSON",stat:!0,forced:pe},{stringify:function(e,t,r){var n,a=[e],i=1;while(arguments.length>i)a.push(arguments[i++]);if(n=t,(g(t)||void 0!==e)&&!ce(e))return d(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!ce(t))return t}),a[1]=t,Y.apply(null,a)}})}B[I][F]||C(B[I],F,B[I].valueOf),H(B,V),M[$]=!0},a640:function(e,t,r){"use strict";var n=r("d039");e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){throw 1},1)}))}},b64b:function(e,t,r){var n=r("23e7"),a=r("7b0b"),i=r("df75"),s=r("d039"),c=s((function(){i(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return i(a(e))}})},b727:function(e,t,r){var n=r("0366"),a=r("44ad"),i=r("7b0b"),s=r("50c4"),c=r("65f0"),o=[].push,f=function(e){var t=1==e,r=2==e,f=3==e,u=4==e,l=6==e,d=5==e||l;return function(g,b,p,h){for(var m,v,y=i(g),S=a(y),O=n(b,p,3),_=s(S.length),w=0,E=h||c,T=t?E(g,_):r?E(g,0):void 0;_>w;w++)if((d||w in S)&&(m=S[w],v=O(m,w,y),e))if(t)T[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:o.call(T,m)}else if(u)return!1;return l?-1:f||u?u:T}};e.exports={forEach:f(0),map:f(1),filter:f(2),some:f(3),every:f(4),find:f(5),findIndex:f(6)}},dbb4:function(e,t,r){var n=r("23e7"),a=r("83ab"),i=r("56ef"),s=r("fc6a"),c=r("06cf"),o=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=s(e),a=c.f,f=i(n),u={},l=0;while(f.length>l)r=a(n,t=f[l++]),void 0!==r&&o(u,t,r);return u}})},dc38:function(e,t,r){"use strict";var n=r("5a70"),a=r.n(n);a.a},e439:function(e,t,r){var n=r("23e7"),a=r("d039"),i=r("fc6a"),s=r("06cf").f,c=r("83ab"),o=a((function(){s(1)})),f=!c||o;n({target:"Object",stat:!0,forced:f,sham:!c},{getOwnPropertyDescriptor:function(e,t){return s(i(e),t)}})},e538:function(e,t,r){var n=r("b622");t.f=n},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-2926e066.5817e822.js.map